"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[30],{8501:(t,n,e)=>{e.d(n,{b:()=>c});var a=e(5684),i=e(8045),c=(0,a.Q_)({id:"client",state:function(){return{clients:[],currentPage:1,clientPaginationData:!1}},actions:{getAllClients:function(t){var n=this;return this.currentPage=t.current_page,new Promise((function(e,a){(0,i.K)({method:i.X.getClients.method,url:i.X.getClients.url,params:t}).then((function(t){var a;null!==(a=t.data)&&void 0!==a&&a.data?(e(t.data.data),n.clients=t.data.data,n.clientPaginationData=t.data):t.data.length?(e(t.data),n.clients=t.data,n.clientPaginationData=!1):e([])})).catch((function(t){return a(t)}))}))},createClient:function(t){var n=this;return new Promise((function(e,a){(0,i.K)({method:i.X.createClient.method,url:i.X.createClient.url,data:t}).then((function(t){n.getAllClients({current_page:n.currentPage}).then((function(){e(t)}))})).catch((function(t){return a(t)}))}))},buyStock:function(t){return new Promise((function(n,e){(0,i.K)({method:i.X.buyStock.method,url:i.X.buyStock.url,data:t}).then((function(t){n(t)})).catch((function(t){return e(t)}))}))},getStockByClient:function(t){return new Promise((function(n,e){(0,i.K)({method:i.X.getClientDataById.method,url:i.X.getClientDataById.url,params:t}).then((function(t){n(t.data)})).catch((function(t){return e(t)}))}))}}})},6561:(t,n,e)=>{e.d(n,{Z:()=>c});var a=e(3645),i=e.n(a)()((function(t){return t[1]}));i.push([t.id,".client__header{align-items:center;display:flex;justify-content:space-between}",""]);const c=i},4649:(t,n,e)=>{e.r(n),e.d(n,{default:()=>_});var a=e(8222),i={class:"client wrapper container mx-auto"},c={class:"client__header"},r=(0,a._)("h2",{class:"head__title"},"Client List",-1),l={class:"client__create-btn"},u=(0,a.Uk)("Create client"),o={class:"client__list wrapper"};var s=e(6121),p=e(8501),d=e(5684);const g={name:"Clients",setup:function(){var t=(0,s.iH)(["id","Client","Cash balance","Gain/Loss"]),n=(0,s.iH)([]),e=(0,p.b)(),a=(0,d.Jk)(e),i=a.clients,c=a.clientPaginationData;e.getAllClients({current_page:1}).then((function(t){r(t)}));var r=function(t){n.value=t.map((function(t){return{id:t.id,name:t.name,cash_balance:t.balance,gain_loss:l(t)}}))};(0,s.YP)((function(){return i.value}),(function(){r(i.value)}));var l=function(t){var n,e=[],a=0,i=0;return null!==(n=t.stocks)&&void 0!==n&&n.length?(t.stocks.map((function(t){var n=e.find((function(n){return t.id===n.id&&t.pivot.purchase_price==n.purchasePrice}));n?n.count+=1:e.push({id:t.id,price:parseInt(t.price),purchasePrice:parseInt(t.pivot.purchase_price),count:1})})),e.map((function(t){a+=t.count*t.price,i+=t.count*t.purchasePrice})),a-i):0};return{headerTitles:t,clientByPages:n,profitCalculation:l,clientPaginationAction:function(t){e.getAllClients({current_page:t}).then((function(t){r(t)}))},clientPaginationData:c}}};var h=e(3379),f=e.n(h),m=e(6561),P={insert:"head",singleton:!1};f()(m.Z,P);m.Z.locals;const _=(0,e(3744).Z)(g,[["render",function(t,n,e,s,p,d){var g=(0,a.up)("router-link"),h=(0,a.up)("app-table"),f=(0,a.up)("pagination");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a._)("div",c,[r,(0,a._)("span",l,[(0,a.Wm)(g,{to:"/client/create"},{default:(0,a.w5)((function(){return[u]})),_:1})])]),(0,a._)("div",o,[(0,a.Wm)(h,{params:{headers:s.headerTitles,isAction:!0,type:"client",cellData:s.clientByPages}},null,8,["params"]),s.clientPaginationData&&s.clientPaginationData.total>s.clientPaginationData.per_page?((0,a.wg)(),(0,a.j4)(f,{key:0,params:{action:s.clientPaginationAction,currentPage:s.clientPaginationData.current_page,total:s.clientPaginationData.total,perPage:s.clientPaginationData.per_page}},null,8,["params"])):(0,a.kq)("",!0)])])}]])}}]);